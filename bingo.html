<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Map Jam Bingo</title>
  <link rel="stylesheet" href="styles/maps.css">
  <style>
    .bingo-board {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      grid-gap: 20px;
      max-width: 800px;
      margin: 0 auto;
    }

    .bingo-square {
      padding: 20px;
      background-color: #b4e1ff;
      text-align: center;
      border-radius: 5px;
      cursor: pointer;
    }

    .bingo-square.marked {
      background-color: #9dc1f8;
    }
  </style>
</head>

<body>
  <header>
    <div class="logo">
      <h1>Prime's Site</h1>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="bathroom.html">Bathroom Game</a></li>
        <li><a href="minecraft-map.html">Minecraft Maps</a></li>
      </ul>
    </nav>
  </header>

  <section class="content">
    <div class="centered">
      <h2>Map Jam Bingo</h2>
      <div class="bingo-board" id="bingoBoard"></div>
      <button class="reset-button" onclick="resetBoard()">Reset</button>
      <button class="save-button" onclick="saveAsImage()">Save as Image</button>
    </div>
  </section>

  <footer>
    <!-- Footer content -->
  </footer>

  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const squares = [
        "Someone's map stops working (Player Done)",
        "Prime gets last place",
        "Chopper gets top 10",
        "At least 5 people/teams did not finish their map in time",
        "Previous Winner wins the map jam",
        "Someone's map breaks automatically",
        "Someone didn't match any theme",
        "Someone who wasn't expected to win",
        "Someone didn't win and got mad",
        "One of the maps goes wrong like 30 minutes before the submission deadline",
        "Prime gets top 5-10",
        "One of Yegg's team members wins",
        "We actually didn't expect anything in a map",
        "Guy who's been talking for 3 days fails to submit (Free Space)",
        "You spawn in the wrong place",
        "Lucian lets a guy in an hour late",
        "A map is missing an RP",
        "Worf's Second Map gets top 10",
        "Corgi's map doesn't work",
        "Someone sumbits the map one minute before deadline",
        "Someone breaking someone else's map",
        "A lot of people agree a map sucked",
        "Free Space",
        "A lot of people agreed a map was good"
      ];

      const bingoBoard = document.getElementById('bingoBoard');
      let markedSquares = [];

      function generateBoard() {
        bingoBoard.innerHTML = '';
        markedSquares = [];

        // Shuffle the squares array
        const shuffledSquares = squares.sort(() => Math.random() - 0.5);

        for (let i = 0; i < 25; i++) {
          const square = document.createElement('div');
          square.classList.add('bingo-square');
          square.textContent = shuffledSquares[i];
          square.addEventListener('click', () => markSquare(square, i));
          bingoBoard.appendChild(square);
        }
      }

      function markSquare(square, index) {
        if (index === 24 && !square.classList.contains('marked')) {
          square.classList.add('marked');
          markedSquares.push(square.textContent);
          checkBingo();
          saveBoard();
        }
      }

      function checkBingo() {
        const lines = [
          // Horizontal lines
          [0, 1, 2, 3, 4],
          [5, 6, 7, 8, 9],
          [10, 11, 12, 13, 14],
          [15, 16, 17, 18, 19],
          [20, 21, 22, 23, 24],
          // Vertical lines
          [0, 5, 10, 15, 20],
          [1, 6, 11, 16, 21],
          [2, 7, 12, 17, 22],
          [3, 8, 13, 18, 23],
          [4, 9, 14, 19, 24],
          // Diagonal lines
          [0, 6, 12, 18, 24],
          [4, 8, 12, 16, 20]
        ];

        for (const line of lines) {
          if (line.every(index => markedSquares.includes(squares[index]))) {
            alert('You Got A Bingo!');
            return;
          }
        }
      }

      function saveBoard() {
        localStorage.setItem('bingoBoard', JSON.stringify(markedSquares));
      }

      function loadBoard() {
        const savedBoard = localStorage.getItem('bingoBoard');
        if (savedBoard) {
          markedSquares = JSON.parse(savedBoard);
          for (let i = 0; i < markedSquares.length; i++) {
            const square = bingoBoard.children[i];
            square.classList.add('marked');
          }
        }
      }

      function resetBoard() {
        const squares = bingoBoard.getElementsByClassName('bingo-square');
        for (let i = 0; i < squares.length; i++) {
          squares[i].classList.remove('marked');
        }
        markedSquares = [];
        localStorage.removeItem('bingoBoard');
      }

      function saveAsImage() {
        html2canvas(document.getElementById('bingoBoard')).then(function(canvas) {
          const link = document.createElement('a');
          link.download = 'map_jam_bingo.png';
          link.href = canvas.toDataURL('image/png');
          link.click();
        });
      }

      generateBoard();
      loadBoard();
    });
  </script>
</body>

</html>
